// https://github.com/Gillardo/bootstrap-ui-datetime-picker
// Version: 2.0.5
// Released: 2015-12-30 
angular.module("ui.bootstrap.datetimepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("uiDatetimePickerConfig",{dateFormat:"yyyy-MM-dd HH:mm",defaultTime:"00:00 PM",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},enableDate:!0,enableTime:!0,todayText:"Today",nowText:"Now",clearText:"Clear",closeText:"Done",dateText:"Date",timeText:"Time",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,altInputFormats:[]}).directive("datetimePicker",["$compile","$parse","$document","$timeout","$uibPosition","dateFilter","uibDateParser","uiDatetimePickerConfig","$rootScope",function(a,b,c,d,e,f,g,h,i){return{restrict:"A",require:"ngModel",scope:{isOpen:"=?",enableDate:"=?",enableTime:"=?",todayText:"@",nowText:"@",dateText:"@",timeText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(j,k,l,m){function n(a){var b=C[0],c=k[0].contains(a.target),d=void 0!==b.contains&&b.contains(a.target);!j.isOpen||c||d||j.$apply(function(){j.isOpen=!1})}function o(a){27===a.which&&j.isOpen?(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.close()}),k[0].focus()):40!==a.which||j.isOpen||(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!0}))}function p(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function q(a){var b=g.parse(a,t,j.date);if(isNaN(b))for(var c=0;c<w.length;c++)if(b=g.parse(a,w[c],j.date),!isNaN(b))return b;return b}function r(a){angular.isNumber(a)&&(a=new Date(a));{if(!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(isNaN(b))return;return b}}}function s(a,b){var c=a||b;return l.ngRequired||l.required||c?(angular.isNumber(c)&&(c=new Date(c)),c?angular.isDate(c)&&!isNaN(c)?!0:angular.isDate(new Date(c))&&!isNaN(new Date(c).valueOf())?!0:angular.isString(c)?!isNaN(q(b)):!1:!0):!0}var t=h.dateFormat,u=angular.isDefined(l.closeOnDateSelection)?j.$parent.$eval(l.closeOnDateSelection):h.closeOnDateSelection,v=angular.isDefined(l.datepickerAppendToBody)?j.$parent.$eval(l.datepickerAppendToBody):h.appendToBody,w=angular.isDefined(l.altInputFormats)?j.$parent.$eval(l.altInputFormats):h.altInputFormats;j.dpData={},j.tpData={},j.showButtonBar=angular.isDefined(l.showButtonBar)?j.$parent.$eval(l.showButtonBar):h.showButtonBar,j.enableDate=angular.isDefined(j.enableDate)?j.enableDate:h.enableDate,j.enableTime=angular.isDefined(j.enableTime)?j.enableTime:h.enableTime,j.showPicker=j.enableDate?"date":"time";var x=!1;h.html5Types[l.type]?(t=h.html5Types[l.type],x=!0):(t=l.datepickerPopup||h.dateFormat,l.$observe("datetimePicker",function(a){var b=a||h.dateFormat;if(b!==t&&(t=b,m.$modelValue=null,!t))throw new Error("datetimePicker must have a date format specified.")}));var y=angular.element('<div date-picker-wrap><div uib-datepicker></div></div><div time-picker-wrap><div uib-timepicker style="margin:0 auto"></div></div>');y.attr({"ng-model":"date","ng-change":"dateSelection(date)"});var z=angular.element(y.children()[0]);if(x&&"month"===l.type&&(z.attr("datepicker-mode",'"month"'),z.attr("min-mode","month")),l.datepickerOptions){var A=j.$parent.$eval(l.datepickerOptions);A&&A.initDate&&(j.initDate=A.initDate,z.attr("init-date","initDate"),delete A.initDate),angular.forEach(A,function(a,b){z.attr(p(b),a)})}angular.isDefined(l.datepickerMode)||(l.datepickerMode="day"),l.dateDisabled&&z.attr("date-disabled","dateDisabled({ date: date, mode: mode })");var B=angular.element(y.children()[1]);if(l.timepickerOptions){var A=j.$parent.$eval(l.timepickerOptions);angular.forEach(A,function(a,b){j.tpData[b]=a,B.attr(p(b),"tpData."+b)})}angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(l[a]){var c=b(l[a]);if(j.$parent.$watch(c,function(b){j.dpData[a]=b}),z.attr(p(a),"dpData."+a),"minDate"==a?B.attr("min","dpData.minDate"):"maxDate"==a&&B.attr("max","dpData.maxDate"),"datepickerMode"===a){var d=c.assign;j.$watch("dpData."+a,function(a,b){angular.isFunction(d)&&a!==b&&d(j.$parent,a)})}}}),x?m.$formatters.push(function(a){return j.date=a,a}):(m.$$parserName="datetime",m.$validators.datetime=s,m.$parsers.unshift(r),m.$formatters.push(function(a){return j.date=a,m.$isEmpty(a)?a:f(a,t)})),m.$viewChangeListeners.push(function(){j.date=q(m.$viewValue)}),k.bind("keydown",o);var C=a(y)(j);y.remove(),v?c.find("body").append(C):k.after(C),j.getText=function(a){return j[a+"Text"]||h[a+"Text"]},j.dateSelection=function(a){if(j.enableTime&&"time"===j.showPicker&&(a||null!=a)&&(angular.isDefined(j.date)&&null!=j.date||(j.date=new Date),a&&null!=a)){var b=new Date(j.date);b.setHours(a.getHours()),b.setMinutes(a.getMinutes()),b.setSeconds(a.getSeconds()),b.setMilliseconds(a.getMilliseconds()),a=b}if(angular.isDefined(a)){if(!j.date){var c=angular.isDefined(l.defaultTime)?l.defaultTime:h.defaultTime,e=new Date("2001-01-01 "+c);isNaN(e)||(a.setHours(e.getHours()),a.setMinutes(e.getMinutes()),a.setSeconds(e.getSeconds()),a.setMilliseconds(e.getMilliseconds()))}j.date=a}var b=j.date?f(j.date,t):null;k.val(b),m.$setViewValue(b),u&&"time"!=j.showPicker&&null!=b&&(j.enableTime?d(function(){j.showPicker="time"},0):j.close())},j.keydown=function(a){27===a.which&&(j.close(),k[0].focus())},j.$watch("isOpen",function(a){if(j.dropdownStyle={display:a?"block":"none"},a){var b=v?e.offset(k):e.position(k);v?j.dropdownStyle.top=b.top+k.prop("offsetHeight")+"px":j.dropdownStyle.top=void 0,j.dropdownStyle.left=b.left+"px",d(function(){j.$broadcast("uib:datepicker.focus"),c.bind("click",n)},0,!1)}else c.unbind("click",n)}),j.isDisabled=function(a){return("today"===a||"now"===a)&&(a=new Date),j.dpData.minDate&&j.compare(a,j.dpData.minDate)<0||j.dpData.maxDate&&j.compare(a,j.dpData.maxDate)>0},j.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},j.select=function(a){var b=null;if("today"===a||"now"==a){var c=new Date;angular.isDate(j.date)?(b=new Date(j.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate()),b.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())):b=c}j.dateSelection(b),"clear"==a&&j.close()},j.close=function(){j.isOpen=!1,j.enableDate&&j.enableTime&&(j.showPicker="date"),k[0].focus()},j.changePicker=function(a,b){a.preventDefault(),a.stopPropagation(),j.showPicker=b},j.$on("$destroy",function(){j.isOpen===!0&&(i.$$phase||j.$apply(function(){j.close()})),C.remove(),k.unbind("keydown",o),c.unbind("click",n)})}}}]).directive("datePickerWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/date-picker.html"}}).directive("timePickerWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/time-picker.html"}}),angular.module("ui.bootstrap.datetimepicker").run(["$templateCache",function(a){"use strict";a.put("template/date-picker.html",'<ul ng-if="isOpen && showPicker == \'date\'" class="dropdown-menu dropdown-menu-left datetime-picker-dropdown" ng-style=dropdownStyle style=left:inherit ng-keydown=keydown($event) ng-click=$event.stopPropagation()><li style="padding:0 5px 5px 5px" class=date-picker-menu><div ng-transclude></div></li><li ng-if=showButtonBar style=padding:5px><span class="btn-group pull-left" style=margin-right:10px><button type=button class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'today\') }}</button> <button type=button class="btn btn-sm btn-danger" ng-click="select(\'clear\')">{{ getText(\'clear\') }}</button></span> <span class="btn-group pull-right"><button ng-if=enableTime type=button class="btn btn-sm btn-default" ng-click="changePicker($event, \'time\')">{{ getText(\'time\')}}</button> <button type=button class="btn btn-sm btn-success" ng-click=close()>{{ getText(\'close\') }}</button></span></li></ul>'),a.put("template/time-picker.html",'<ul ng-if="isOpen && showPicker == \'time\'" class="dropdown-menu dropdown-menu-left datetime-picker-dropdown" ng-style=dropdownStyle style=left:inherit ng-keydown=keydown($event) ng-click=$event.stopPropagation()><li style="padding:0 5px 5px 5px" class=time-picker-menu><div ng-transclude></div></li><li ng-if=showButtonBar style=padding:5px><span class="btn-group pull-left" style=margin-right:10px><button type=button class="btn btn-sm btn-info" ng-click="select(\'now\')" ng-disabled="isDisabled(\'now\')">{{ getText(\'now\') }}</button> <button type=button class="btn btn-sm btn-danger" ng-click="select(\'clear\')">{{ getText(\'clear\') }}</button></span> <span class="btn-group pull-right"><button ng-if=enableDate type=button class="btn btn-sm btn-default" ng-click="changePicker($event, \'date\')">{{ getText(\'date\')}}</button> <button type=button class="btn btn-sm btn-success" ng-click=close()>{{ getText(\'close\') }}</button></span></li></ul>')}]);